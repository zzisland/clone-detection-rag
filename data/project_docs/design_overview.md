# 代码克隆检测RAG助手设计文档

## 项目概述

本项目是一个基于检索增强生成(RAG)技术的代码克隆检测智能助手，旨在帮助开发者理解和使用代码克隆检测技术。

## 系统架构

### 核心组件

1. **数据摄取模块(ingest.py)**
   - 支持多种文档格式：TXT、MD、PDF、HTML、代码文件
   - 文本清洗和预处理
   - 文档分割和向量化
   - 向量数据库存储

2. **检索模块(retriever.py)**
   - 基于Chroma的向量检索
   - 支持过滤条件搜索
   - 多种检索策略
   - 结果排序和优化

3. **RAG核心模块(rag.py)**
   - 多种问答模板
   - 智能问题分类
   - 上下文整合
   - 答案生成

4. **前端界面(app.py)**
   - Streamlit Web界面
   - 实时对话功能
   - 系统状态监控
   - 配置管理

## 数据源

### 知识库内容

1. **学术论文**
   - 克隆检测基础理论
   - 检测方法比较
   - 评估指标研究

2. **工具文档**
   - NiCad使用指南
   - CCFinder配置说明
   - 其他工具介绍

3. **项目文档**
   - 系统设计文档
   - API说明
   - 使用指南

4. **示例代码**
   - 克隆代码示例
   - 检测脚本
   - 配置文件

## 功能特性

### 智能问答
- 概念解释
- 方法比较
- 工具使用指导
- 结果分析

### 代码分析
- 代码片段分析
- 克隆类型判断
- 检测建议

### 知识检索
- 多源信息整合
- 相关性排序
- 来源追踪

## 技术栈

- **前端**: Streamlit
- **后端**: Python, LangChain
- **向量数据库**: Chroma
- **LLM**: OpenAI GPT
- **文档处理**: PyPDF2, BeautifulSoup

## 配置要求

- Python 3.8+
- OpenAI API Key
- 2GB+ 内存
- 10GB+ 存储空间

## 使用流程

1. 配置环境变量
2. 准备数据文档
3. 运行数据摄取
4. 启动Web界面
5. 开始智能问答

## 扩展计划

### 短期
- 支持更多文档格式
- 优化检索算法
- 增加问答模板

### 长期
- 多语言支持
- 代码相似性分析
- 自动化报告生成

## 评估指标

- 回答准确率
- 检索相关性
- 用户满意度
- 系统响应时间
